<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyNet Monitoring </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    /* ... (your existing CSS exactly as you provided) ... */
    :root {
      --primary-color: #198754;
      --secondary-color: #0d6efd;
      --danger-color: #dc3545;
      --warning-color: #fd7e14;
      --dark-color: #212529;
    }
    body { background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding-top: 20px; }
    .table-container { background-color: #ffffff; padding: 20px; border-radius: 12px; box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15); max-height: 70vh; overflow-y: auto; margin-bottom: 20px; }
    .table thead { position: sticky; top: 0; color: #ffffff; background-color: var(--primary-color); z-index: 10; }
    .table tbody tr:hover { background-color: rgba(25, 135, 84, 0.05); }
    .input-group input { border-radius: 0.375rem !important; border-right: none; }
    #statusDiv { font-weight: bold; padding: 12px; margin-bottom: 15px; color: white; border-radius: 8px; transition: all 0.3s ease; }
    .btn-download { border-top-left-radius: 0 !important; border-bottom-left-radius: 0 !important; transition: all 0.2s ease; }
    .btn-download:hover { transform: translateY(-1px); }
    .packet-counter { margin-left: 10px; font-size: 0.9rem; color: #6c757d; font-weight: 500; }
    th, td { font-size: 0.85rem; word-break: break-word; vertical-align: middle; padding: 12px 8px !important; }
    .protocol-tcp { color: #0d6efd; } .protocol-udp { color: #fd7e14; } .protocol-http { color: #198754; } .protocol-https { color: #157347; } .protocol-dns { color: #6f42c1; } .protocol-icmp { color: #6c757d; }
    .port-high { background-color: rgba(220, 53, 69, 0.1); font-weight: bold; }
    .status-ready { background-color: #6c757d; } .status-connecting { background-color: #fd7e14; } .status-active { background-color: #198754; } .status-stopped { background-color: #dc3545; } .status-error { background-color: #b02a37; }
    ::-webkit-scrollbar { width: 8px; height: 8px; } ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; } ::-webkit-scrollbar-thumb { background: var(--primary-color); border-radius: 4px; } ::-webkit-scrollbar-thumb:hover { background: #157347; }
    @media (max-width: 768px) { .table-container { padding: 10px; } th, td { font-size: 0.75rem; padding: 8px 4px !important; } .btn { padding: 0.25rem 0.5rem; font-size: 0.875rem; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .new-packet { animation: fadeIn 0.3s ease-out; }
  </style>
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: HeroBiz
  * Template URL: https://bootstrapmade.com/herobiz-bootstrap-business-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->


</head>
<body>
  
  <!-- header and UI (exactly your markup) -->
  <header id="header" class="header d-flex align-items-center sticky-top shadow-sm">
    <div class="container-fluid position-relative d-flex align-items-center justify-content-between">
      <a href="display.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <h1 class="sitename" style="font-weight: bold;">SkyNet Monitoring</h1>
        <span></span>
      </a>
      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">Home<br></a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="Register.html">Registered_IP</a></li>

          <li><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Register IP</button></li>
          
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      
      <a class="btn-getstarted" href="services.html">Get Started</a>
    </div>
  </header>

  <div class="container py-4">
   <!-- Button trigger modal
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Launch demo modal
</button> -->

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Register IP</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="ipForm">
          <div id="statusDiv" class="mb-3"></div>
          <div class="mb-3">
            <label for="ipAddress" class="form-label">Register IP Address</label>
            <input type="text" class="form-control" id="ipAddress" name="ipAddress" placeholder="e.g., 192.168.1.1" required>
          </div>
          <div class="mb-3">
            <label for="deviceName" class="form-label">User Name</label>
            <input type="text" class="form-control" id="deviceName" name="deviceName" placeholder="e.g., Mr. Muhammed Pc">
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Register</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </form>
      </div>
      </form>
    </div>
      </div>

      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="registerBtn btn btn-primary">Register</button>
      </div> -->
    </div>
  </div>
</div>
<!-- <div id="statusDiv" class="text-center w-25 mx-auto status-ready">Ready to capture</div> -->
<div class="row w-75 mx-auto justify-content-center mb-4">
      <div class="col-md-10">
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="d-flex flex-wrap justify-content-center gap-2">
              <button id="startBtn" class="btn btn-success px-4">
                <i class="bi bi-play-fill me-2"></i>Start
              </button>
              <button id="stopBtn" class="btn btn-danger px-4" disabled>
                <i class="bi bi-stop-fill me-2"></i>Stop
              </button>
              <button id="clearBtn" class="btn btn-warning px-4">
                <i class="bi bi-trash me-2"></i>Clear
              </button>
              <button id="downloadBtn" class="btn btn-primary px-4">
                <i class="bi bi-download me-2"></i>Download
              </button>
            </div>
            <div class="mt-3 row align-items-center">
              <div class="col-flex justify-content-between align-items-center">
                <div class="input-group ">
                  <span class="input-group-text"><i class="bi bi-filter"></i></span>
                  <input type="text" id="filterInput" class="form-control" placeholder="Filter traffic...">

                  <div class="mt-2 text-end"> <span id="packetCounter" class="packet-counter">0 packets captured</span>
                </div>            
                 <!-- <div class="col-md-6 mt-2 mt-md-0; d-flex justify-content-between align-items-center" style="gap: 3px;">
           <input type="text;" id="ipAddress" placeholder="Enter IP address" />
          <input type="text" id="deviceName" placeholder="Enter device name (optional)" />
          <button id="registerBtn">Register</button>  -->
             </div> 
             
              
              </div>
            </div>
          </div>
        </div>
      </div> 
    </div>

  </div>
  <div class="card w-75 mx-auto shadow-sm m-5">
    <div class="card-body p-0">
      <div class="table-container">
        <table class="table table-hover align-middle mb-0">
          <thead>
            <tr>
              <th>#</th>
              <th>Time</th>
              <th>Protocol</th>
              <th>Source IP</th>
              <th>Destination IP</th>
              <th>Source Port</th>
              <th>Destination Port</th>
              <th>Info</th>
            </tr>
          </thead>
          <tbody id="packetBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- keep your original bootstrap script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Enhanced auto-scroll functionality (unchanged)
    const autoScrollCheckbox = document.getElementById('autoScroll');
    const packetBody = document.getElementById('packetBody');
    let scrollObserver;
    function initAutoScroll() {
      if (scrollObserver) scrollObserver.disconnect();
      if (autoScrollCheckbox.checked) {
        scrollObserver = new MutationObserver((mutations) => {
          const container = packetBody.parentElement.parentElement;
          if (container.scrollTop > container.scrollHeight - container.clientHeight - 100) {
            container.scrollTop = container.scrollHeight;
          }
        });
        scrollObserver.observe(packetBody, { childList: true });
      }
    }
    autoScrollCheckbox.addEventListener('change', initAutoScroll);
    document.addEventListener('DOMContentLoaded', initAutoScroll);
  </script>

  <!-- Load the updated JS file from /static -->
  <script src="call.js"></script>
</body>
</html>
